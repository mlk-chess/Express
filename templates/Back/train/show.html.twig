{% extends 'base_back.html.twig' %}

{% block title %}Train{% endblock %}

{% block body %}
    <h1>{{ train }}</h1>

    <table class="table">
        <tbody>
            <tr>
                <th>Id</th>
                <td>{{ train.id }}</td>
            </tr>
            <tr>
                <th>Nom</th>
                <td>{{ train.name }}</td>
            </tr>
            <tr>
                <th>Description</th>
                <td>{{ train.description }}</td>
            </tr>
        </tbody>
    </table>
    <div class="d-flex">

        <form method="post" action="{{ path('admin_train_edit', {'id': train.id}) }}">
            <input type="hidden" name="_token" value="{{ csrf_token('edit' ~ train.id) }}">
            <button class="btn btn-primary-express">Modifier</button>
        </form>
      
        <div>
            <a class="btn btn-primary-express mx-2"href="{{ path('admin_train_disable', {'id': train.id}) }}">DÃ©sactiver ce train</a>
        </div>


    </div>

    <div class="d-flex justify-content-between mt-5 mb-4">
        <h2>Liste des wagons</h2>
        <div>
           
            <form method="post" action="{{ path('admin_wagon_new', {'id': train.id}) }}">
                <input type="hidden" name="_token" value="{{ csrf_token('new' ~ train.id) }}">
                <button class="btn btn-primary-express">Ajouter un wagon</button>
            </form>
        </div>
    </div>

    <table class="hover row-border" id="table_wagon">
        <thead>
        <tr>
            <th>Classe</th>
            <th>Type</th>
            <th>Nombre de places</th>
            <th>Action</th>
        </tr>
        </thead>
        <tbody>
        {% for wagon in wagons %}
            <tr>
              
                <td>{{ wagon.class }}</td>
                <td>{{ wagon.type }}</td>
                <td>{{ wagon.placeNb }}</td>
                <td class="d-flex">
                    <a class="btn btn-primary-express mx-2" href="{{ path('admin_wagon_show', {'id': wagon.id}) }}">Voir</a>
                    <form method="post" action="{{ path('admin_wagon_edit', {'id': wagon.id}) }}">
                        <input type="hidden" name="_token" value="{{ csrf_token('edit' ~ wagon.id) }}">
                        <button class="btn btn-primary-express">Modifier</button>
                    </form>

                   
                </td>
            </tr>
        {% else %}
            <tr>
                <td colspan="4">Aucun wagon existant</td>
            </tr>
        {% endfor %}
        </tbody>
    </table>


{% endblock %}

{% block javascripts %}
<script>

$(document).ready( function () {
    $('#table_wagon').DataTable();
});
</script>
{% endblock%}
